# ============================================================

# elevatedevworks.com â€” canonical redirects + security headers

# Canonical host: https://elevatedevworks.com (NO www)

# ============================================================

# Use exported 404 page

ErrorDocument 404 /404.html

RewriteEngine On

# ------------------------------------------------------------

# 1) Force HTTPS + non-www (single hop)

# Handles:

# - http://elevatedevworks.com -> https://elevatedevworks.com

# - http://www.elevatedevworks.com -> https://elevatedevworks.com

# - https://www.elevatedevworks.com -> https://elevatedevworks.com

# - Proxy/CDN setups via X-Forwarded-Proto

# ------------------------------------------------------------

RewriteCond %{HTTPS} !=on [OR]
RewriteCond %{HTTP:X-Forwarded-Proto} !https [OR]
RewriteCond %{HTTP_HOST} !^elevatedevworks\.com$ [NC]
RewriteRule ^ https://elevatedevworks.com%{REQUEST_URI} [R=301,L]

# ------------------------------------------------------------

# 2) Remove /index.html (and /index.php) safely (no loops)

# ------------------------------------------------------------

RewriteCond %{THE_REQUEST} \s/+(._/)?index\.(html?|php)(\s|\?) [NC]
RewriteRule ^(._/)?index\.(html?|php)$ https://elevatedevworks.com/$1 [R=301,L,NC]

# ------------------------------------------------------------

# (Optional) Trailing slash enforcement

# Enable ONLY if you're sure you want /services/ not /services

# and nothing else is removing slashes (to avoid loops).

# ------------------------------------------------------------

# RewriteCond %{REQUEST_URI} !\.[a-zA-Z0-9]{2,5}$

# RewriteCond %{REQUEST_URI} !/$

# RewriteRule ^(.+)$ $1/ [R=301,L]

<IfModule mod_headers.c>
  Header always set X-Content-Type-Options "nosniff"
  Header always set Referrer-Policy "strict-origin-when-cross-origin"
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set Permissions-Policy "geolocation=(), microphone=(), camera=(), usb=()"

# HSTS (set once)

Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"

AddDefaultCharset utf-8
AddCharset utf-8 .html .css .js .svg .json

# Allow major crawlers (if you later add rate limiting rules)

BrowserMatchNoCase "googlebot|bingbot|duckduckbot|adsbot-google" good_bot
</IfModule>
